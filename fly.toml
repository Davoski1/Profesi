# Fly.io Configuration for PROFESI
app = "profesi-disaster-prediction"
primary_region = "iad"

# Simple Docker build
[build]
  dockerfile = "Dockerfile"

# Environment
[env]
  FLASK_ENV = "production"
  POSTGRES_USER = "profesi_user"
  POSTGRES_PASSWORD = "profesi123"
  POSTGRES_DB = "profesi_db"
  DATABASE_URL = "postgresql://profesi_user:profesi123@postgres:5432/profesi_db"

# Main service on port 8000
[[services]]
  protocol = "tcp"
  internal_port = 8000
  ports = [{handlers = ["http"], port = 80}, {handlers = ["tls", "http"], port = 443}]
  force_https = false

# VM: 1 shared CPU, 1GB RAM (free tier)
[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 1024
